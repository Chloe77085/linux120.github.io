<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-linux-kernel" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Linux 内核 | Linux 1.2.0</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://linux120.github.io/linux120.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://linux120.github.io/linux120.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://linux120.github.io/linux120.github.io/docs/linux-kernel"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Linux 内核 | Linux 1.2.0"><meta data-rh="true" name="description" content="推荐在 Ubuntu18 - Ubuntu22 系统下进行 Linux kernel 相关的开发。"><meta data-rh="true" property="og:description" content="推荐在 Ubuntu18 - Ubuntu22 系统下进行 Linux kernel 相关的开发。"><link data-rh="true" rel="icon" href="/linux120.github.io/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://linux120.github.io/linux120.github.io/docs/linux-kernel"><link data-rh="true" rel="alternate" href="https://linux120.github.io/linux120.github.io/docs/linux-kernel" hreflang="en"><link data-rh="true" rel="alternate" href="https://linux120.github.io/linux120.github.io/docs/linux-kernel" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Linux 内核","item":"https://linux120.github.io/linux120.github.io/docs/linux-kernel"}]}</script><link rel="alternate" type="application/rss+xml" href="/linux120.github.io/blog/rss.xml" title="Linux 1.2.0 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/linux120.github.io/blog/atom.xml" title="Linux 1.2.0 Atom Feed"><link rel="stylesheet" href="/linux120.github.io/assets/css/styles.e4599f8b.css">
<script src="/linux120.github.io/assets/js/runtime~main.5bd149a5.js" defer="defer"></script>
<script src="/linux120.github.io/assets/js/main.8affafee.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/linux120.github.io/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/linux120.github.io/"><div class="navbar__logo"><img src="/linux120.github.io/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/linux120.github.io/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/linux120.github.io/docs/peripheral-compatibility-list">Tutorial</a><a class="navbar__item navbar__link" href="/linux120.github.io/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/peripheral-compatibility-list">外设兼容列表</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/revision-history">文档更新说明</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/linux120.github.io/docs/quick-start/">快速入门</a><button aria-label="Expand sidebar category &#x27;快速入门&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/peripherals-and-interfaces">外设与接口</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/linux120.github.io/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Expand sidebar category &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/linux120.github.io/docs/linux-kernel">Linux 内核</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/linux120.github.io/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Expand sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/qualcomm-ai-hub">Qualcomm AI Hub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/ai-developer-workflow">AI 开发者工作流程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/qualcomm-im-sdk">Qualcomm IM SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/lvgl-user-guide">LVGL 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/qt5-user-guide">QT5 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/tools-and-libraries-porting-guide">工具&amp;库移植指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/ros-user-guide">ROS 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/yocto-project-user-guide">Yocto 工程编译指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/user-guide-to-rubikpi-config">rubikpi_config 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/gitHub-operation-guide">GitHub操作指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/linux120.github.io/docs/set-up-development-environment">开发环境搭建</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/linux120.github.io/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Linux 内核</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Linux 内核</h1></header>
<a id="linuxkernel"></a>
<p>推荐在 Ubuntu18 - Ubuntu22 系统下进行 Linux kernel 相关的开发。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码下载">代码下载<a href="#代码下载" class="hash-link" aria-label="Direct link to 代码下载" title="Direct link to 代码下载">​</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/rubikpi-ai/linux.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git submodule init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git submodule update</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="目录分析">目录分析<a href="#目录分析" class="hash-link" aria-label="Direct link to 目录分析" title="Direct link to 目录分析">​</a></h2>
<p>在执行完 <code>git clone</code> 命令后，RUBIK Pi 3 Linux 代码仓库的目录如下：</p>
<p><img decoding="async" loading="lazy" src="/linux120.github.io/assets/images/image-99-cec6607b5c07ac42b63c532f51d20934.jpg" width="1000" height="134" class="img_ev3q"></p>
<p>其中重要的文件夹或文件的含义如下：</p>
<table><thead><tr><th><strong>名字</strong></th><th><strong>描述</strong></th><th><strong>名字</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>arch</td><td>架构相关的目录</td><td>security</td><td>安全架构相关的目录</td></tr><tr><td>block</td><td>块设备相关的目录</td><td>sound</td><td>音频系统相关的目录</td></tr><tr><td>certs</td><td>认证和签名相关的目录</td><td>tools</td><td>内核交互工具的目录</td></tr><tr><td>crypto</td><td>加密相关的目录</td><td>usr</td><td>与 initramfs 相关的目录，用于生成initramfs</td></tr><tr><td>documentation</td><td>文档相关的目录</td><td>virt</td><td>提供虚拟机技术（KVM）的目录</td></tr><tr><td>drivers</td><td>驱动相关的目录</td><td>rust</td><td>Rust相关的目录</td></tr><tr><td>firmware</td><td>固件相关的目录</td><td>rubikpi</td><td>RUBIK Pi 3 相关的目录，存放编译工具等</td></tr><tr><td>fs</td><td>文件系统相关的目录</td><td>techpack</td><td>高通平台相关的驱动</td></tr><tr><td>include</td><td>头文件相关目录</td><td>.config</td><td>内核编译最终使用的配置文件</td></tr><tr><td>init</td><td>内核初始化相关的目录</td><td>Makefile</td><td>编译内核的主要文件</td></tr><tr><td>ipc</td><td>进程间通信相关的目录</td><td>Kbuild</td><td>配置内核设定的脚本</td></tr><tr><td>kernel</td><td>内核最核心部分代码的目录</td><td>Kconfig</td><td>图形化配置界面的配置文件</td></tr><tr><td>lib</td><td>内核核心库代码的目录</td><td>MAINTAINERS</td><td>维护者名单</td></tr><tr><td>mm</td><td>内存管理相关代码的目录</td><td>CREDITS</td><td>Linux 贡献者</td></tr><tr><td>net</td><td>网络协议相关的代码目录</td><td>COPYING</td><td>版权声明</td></tr><tr><td>samples</td><td>内核编程范例相关的目录</td><td>rubikpi_build.sh</td><td>RUBIK Pi 3 提供的编译、打包脚本</td></tr><tr><td>scripts</td><td>内核编译、配置相关脚本的目录</td><td>rubikpi_flash.sh</td><td>RUBIK Pi 3 提供的烧录脚本</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设备树">设备树<a href="#设备树" class="hash-link" aria-label="Direct link to 设备树" title="Direct link to 设备树">​</a></h3>
<p>RUBIK Pi 3 的顶层设备树是 <em>rubikpi3.dts</em> ，可以在 <em>arch/arm64/boot/dts/qcom</em> 目录下找到，对于设备树的所有修改，推荐在此文件上进行。</p>
<p>除此之外，在开发过程中，同级目录的 <em>sc7280.dtsi</em> 也可能会高频查看。 <em>sc7280.dtsi </em>中拥有 GPIO、SPI、I2C、UART、CPU、GPU 等开发过程中较为常用的节点。</p>
<p>高通平台将显示、图形、摄像头、视频等相关的驱动和设备树从 linux kernel 源码中分离出来成独立的仓库，可根据 <a href="/linux120.github.io/docs/yocto-project-user-guide">Yocto 工程编译指南</a> 章节下载 Yocto 工程源码，通过查看 <em>layers/meta-qcom-hwe</em> 目录下的 <em>.bb</em> 文件提供的信息访问具体的代码仓库，以查看摄像头的设备树为例：</p>
<p>查看 <em>layers/meta-qcom-hwe/recipes-multimedia/cameradlkm/cameradlkm_1.0.bb </em>文件，有如下内容：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRCPROJECT = &quot;git://git.codelinaro.org/clo/le/platform/vendor/opensource/camera-kernel.git;protocol=https&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRCBRANCH  = &quot;camera-kernel.qclinux.1.0.r1-rel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRCREV     = &quot;0f2b11fac7f13f76a9e9f8e25ae2de5c97b23169&quot;</span><br></span></code></pre></div></div>
<ul>
<li>
<p>表示仓库的地址是 <a href="https://git.codelinaro.org/clo/le/platform/vendor/opensource/camera-kernel.git" target="_blank" rel="noopener noreferrer">https://git.codelinaro.org/clo/le/platform/vendor/opensource/camera-kernel.git</a></p>
</li>
<li>
<p>分支为 <code>camera-kernel.qclinux.1.0.r1-rel</code></p>
</li>
<li>
<p>具体的提交是 <code>0f2b11fac7f13f76a9e9f8e25ae2de5c97b23169</code></p>
</li>
</ul>
<p>为了编译的设备树烧录到板子后，板子可正常运行，RUBIK Pi 3 将这些独立 linux kernel 源码外的设备树子仓库，放到了 <em>arch/arm64/boot/dts/qcom</em> 目录下：</p>
<ul>
<li>
<p>显示：<em>arch/arm64/boot/dts/qcom/display-devicetree</em></p>
</li>
<li>
<p>摄像头：<em>arch/arm64/boot/dts/qcom/camera-devicetree</em></p>
</li>
<li>
<p>图形：<em>arch/arm64/boot/dts/qcom/</em>graphics-devicetree</p>
</li>
<li>
<p>视频：<em>arch/arm64/boot/dts/qcom/video-devicetree</em></p>
</li>
</ul>
<p>在使用 <code>./rubikpi_build.sh -d</code> 命令编译设备树时，会先编译内核设备树 <em>rubikpi3.dtb</em> 作为基本设备树，再将各子仓库的设备树覆盖到基本设备树中，最后覆盖 <em>arch/arm64/boot/dts/thundercomm/rubikpi3/rubikpi3-overlay.dtso</em> 设备树，推荐将对子仓库设备树的修改加入到 <em>rubikpi3-overlay.dtso </em>中。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码编译">代码编译<a href="#代码编译" class="hash-link" aria-label="Direct link to 代码编译" title="Direct link to 代码编译">​</a></h2>
<a id="codecompile"></a>
<ol>
<li>
<p>运行下面的命令设置交叉编译环境，具体请参考 <a href="/linux120.github.io/docs/set-up-development-environment#%E5%AE%89%E8%A3%85%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7">安装交叉编译工具</a>。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source &lt;your toolchains directory&gt;/environment-setup-armv8-2a-qcom-linux</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>交叉编译环境只对当前终端有效。</p></div></div>
<p>若出现如下错误，可按提示输入<code>unset LD_LIBRARY_PATH</code> 命令后，再次执行上面命令。</p>
<p><img decoding="async" loading="lazy" src="/linux120.github.io/assets/images/img_v3_02gt_f239295c-d554-4bad-9b72-fce7bafe7ecg-bb5839c97d7aec928bbc48e9c8ada7e6.jpg" width="1000" height="176" class="img_ev3q"></p>
</li>
<li>
<p>进入内核目录，整编内核。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./rubikpi_build.sh -a</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><ul>
<li>第一次编译的时间会比较长，时间因个人电脑配置而异，普遍在 20 分钟之内，当编译成功后，后面对代码修改只会编译修改的部分；</li>
<li>使用 <code>./rubikpi_build.sh -c</code> 命令可以清理内核目录，清理后所有的编译生成物和部分配置内容都会被删除掉。</li>
</ul></div></div>
</li>
<li>
<p>进入内核目录，打包内核、设备树镜像。</p>
</li>
</ol>
<a id="Linuxkernelpack"></a>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./rubikpi_build.sh -dp -ip</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="/linux120.github.io/assets/images/image-96-714ab8b65eebd219d5facb69d2e95ca4.jpg" width="950" height="91" class="img_ev3q"></p>
<p>如果打包镜像时报错：</p>
<p><img decoding="async" loading="lazy" src="/linux120.github.io/assets/images/image-95-f902205bdc5e1ca2da2f484c866aaf30.jpg" width="1000" height="74" class="img_ev3q"></p>
<p>执行下面命令编辑 <em>.mtoolsrc</em> 文件，并在其中添加 <code>mtools_skip_check=1</code>，然后再重新打包镜像。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vim ~/.mtoolsrc</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>在 2025 年 3 月份的更新中，若烧录了非 RUBIK Pi 3 官方发布的镜像，则需将对应镜像包中的 efi.bin 拷贝到 rubikpi/tools/pack 目录下后再进行打包。</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>使用 <code>./rubikpi_build.sh</code> 命令时，将完成步骤 2 和步骤 3 的操作。</p></div></div>
<ol start="4">
<li>进入内核目录，烧录内核、设备树镜像。</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> ./rubikpi_flash.sh -d -i -r</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>烧录前，RUBIK Pi 3 需要进入 fastboot 模式，有下面两种进入方法：</p><ul>
<li>在 RUBIK Pi 3 终端输入：<code>reboot bootloader</code>，进入 fastboot 模式后，RUBIK Pi 3 上的蓝灯会亮起来。</li>
<li>按住电源按钮开机，直到 RUBIK Pi 3 上的蓝灯亮起。</li>
</ul></div></div>
<ol start="5">
<li>关于 <em>rubikpi_build.sh</em> 和 <em>rubikpi_flash.sh</em> 的用法可使用 <code>-h</code> 参数进行查看。</li>
</ol>
<p>使用 <code>./rubikpi_buils.sh -h</code> 命令查看编译脚本使用方法。</p>
<p>示例输出</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bash ./rubikpi_build.sh [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, --help              display this help message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -dp, --dtb_package      generate a burnable device tree image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -ip, --image_package    generate a burnable kernel image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -a, --build_all         Complete compilation of kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d, --build_dts         Complete compilation of device tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -gc, --generate_config  Generate. config file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c, --clean             Clean up workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>使用 <code>./rubikpi_flash.sh -h </code>命令查看烧录脚本使用方法。</p>
<p>示例输出</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bash ./rubikpi_flash.sh [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, --help     display this help message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -r, --reboot   exit fastboot mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d, --dtb      flash device tree image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i, --image    flash kernel image</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="单独编译-ko-驱动模块">单独编译 ko 驱动模块<a href="#单独编译-ko-驱动模块" class="hash-link" aria-label="Direct link to 单独编译 ko 驱动模块" title="Direct link to 单独编译 ko 驱动模块">​</a></h2>
<ol>
<li>
<p>创建 <em>Makefile </em>文件如下，修改 <code>KDIR</code> 为实际 kernel 源码在个人电脑上的目录。</p>
<div class="language-makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-makefile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obj-m += hello.o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KDIR:=/home/rubikpi/kernel-6.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PWD?=$(shell pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">all:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        make -C $(KDIR) M=$(PWD) modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo $(PWD)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clean:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rm -f *.ko *.o *.mod *.mod.o *.mod.c *.symvers *.order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
</li>
<li>
<p>创建 <em>hello.c </em>文件如下：</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/module.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;linux/init.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello RUBIK Pi!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello_exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;bye RUBIK Pi!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">module_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello_init</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">module_exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hello_exit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">MODULE_LICENSE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GPL&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">MODULE_VERSION</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;V1.0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">MODULE_AUTHOR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;RUBIK Pi&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p>执行命令编译 ko 模块：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export ARCH=arm64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CROSS_COMPILE=aarch64-qcom-linux-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make</span><br></span></code></pre></div></div>
</li>
<li>
<p>将 hello.ko 传到 RUBIK Pi 3 中，可以使用 ADB、SCP 等方式。</p>
</li>
<li>
<p>在 RUBIK Pi 3 中执行如下命令，验证编译生成物有效：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">insmod hello.ko </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rmmod hello.ko </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dmesg | grep &quot;RUBIK Pi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="data:image/jpeg;base64,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u7pnHr70E2NfV7LT7fxPeWsssltaI52mOPzCvcDBI459ag0u5TT9ZM9tFLeRRhwAB5bFSpXP8WOvvWfNNLPK0s8jySNyzuxJP1Jp1tc3FpKJbWeWCQcB43Kn8xSSsrDsaOuWEdtFZXMH2hUu4ywhuDl48HHXAyD2OBVG6tLrTrlY7qB4ZQA4WRex5BwaZcXE91KZbmaSaQ9XkYsT+JpJrieeQSzzSSSAABnYsQB05NNAb+uXF1d6TodxdPukIly0i/KPn44xjHtiui1aT7Po14hvNKUpbw2wAtcYYgu44j4z1A6Drwa4a51fU7uEw3Wo3k8RIJSSdmX8iahlurmYMJriWQM29g7k5bGMn3x3pNXVhcuqZDXvnhv/AJFnSv8Arzh/9AFeB132m/En7BplrZ/2R5n2eFIt/wBpxu2qBnGzjpQ0Kab2MX4hf8jrqH/bP/0Wtc3Wl4h1X+29buNS8jyPO2/u9+7GFC9cD09KzaaKWwUUUUDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//2Q==" width="332" height="115" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="内核配置">内核配置<a href="#内核配置" class="hash-link" aria-label="Direct link to 内核配置" title="Direct link to 内核配置">​</a></h2>
<p>使用 <code>menuconfig</code> 对 Linux 内核进行配置，执行如下命令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make ARCH=arm64 menuconfig</span><br></span></code></pre></div></div>
<p>配置完成并执行如下命令将配置保存。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ARCH=arm64 savedefconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp defconfig ./arch/arm64/configs/rubik_pi3_defconfig</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3.linux-kernel.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/linux120.github.io/docs/tutorial-basics/congratulations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Congratulations!</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/linux120.github.io/docs/category/tutorial---extras"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tutorial - Extras</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#代码下载" class="table-of-contents__link toc-highlight">代码下载</a></li><li><a href="#目录分析" class="table-of-contents__link toc-highlight">目录分析</a><ul><li><a href="#设备树" class="table-of-contents__link toc-highlight">设备树</a></li></ul></li><li><a href="#代码编译" class="table-of-contents__link toc-highlight">代码编译</a></li><li><a href="#单独编译-ko-驱动模块" class="table-of-contents__link toc-highlight">单独编译 ko 驱动模块</a></li><li><a href="#内核配置" class="table-of-contents__link toc-highlight">内核配置</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/linux120.github.io/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/linux120.github.io/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>